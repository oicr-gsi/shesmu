# Shesmu FAQ
This is intended for olive developers and operators.

## It's gone haywire!!!
On the main status page, hit the _STOP ALL ACTIONS_ button. Also, that's not a question.

## I don't see the alert on Shemu's Alerts page. What gives?
Shesmu, like most of other programs, feeds data into [Prometheus](https://prometheus.io/docs/introduction/overview/) and Prometheus sends alerts to AlertManager when the application is behaving badly. Shesmu also has `Alert` olives that create alerts about data in the system and send these directly to AlertManager. Only these data alerts will be displayed on the Shesmu _Alerts_ page.

## What going on with these actions?
Go to the Shesmu instance of interest, click on the _Actions_ tab. Here, you can find all the actions the server is trying to perform. If you click on the Stats button, you'll get some tables about the actions:

- counts for each action state (failed, succeeded, ...)
- counts for each action type (Guanyin, Vidarr, JIRA, ...)
- counts for each olive that generated an action
- cross tables for all of the above
- histograms for when an action was last attempted/check/run
- histograms for when an action was last generated by an olive
- Click on any cell or heading to filter by that criterion. At the bottom of the screen, you will see another set of buttons where you can List the actions, get more Stats on your selection, or display the JSON query that selects these action, if you're into that kind of thing.

## What's this server trying to do?
From _Internals_, select _Active Server Processes_ to see a list of things the server is currently chewing on.

## What does `at3sis` mean?
From _Tools_, select _Type Converter_ and enter the type descriptor in the box and then hit the button to get a human-friendly type.

## How do I figured out how why my action failed? Why is this action unknown?
Follow the SOP: Investigating Failure to figure out the source of the problem. //TODO

## There was a thing that failed. How do I make it go away?
If it's a Vidarr workflow, choose the command to retry the failed workflow.

If you've changed the olive/LIMS/run blacklist/whatever to exclude this action, you can purge this action. From the _Actions_ page, select a filter that finds your bad action, then click _PURGE_. If the world hasn't changed, the olive will recreate it.

Have at look at the _Last Generated_ by an _Olive_ age. If this is over 2 hours, you can be very confident the olive is no longer creating this action

## I changed my olive but the actions are the same. What gives?
Every time an olive runs, all the actions are generated and go into Shemu's scheduler. When the olive runs again, it regenerates all those actions and Shesmu needs to decide if two actions are the same. Actions get to decide if two actiosn are equivalent and that may not include all parameters. If you look at the actions, it will list the olives that generated and you will see two version of the same source file.

To get Shesmu to replace the actions, purge the old ones (either individually or in bulk). This will cause the new action to be in the scheduler.

For Vidarr workflows, it uses the workflow, the input files, the LIMS keys, and labels. If your olive only changes arguments, the modified actions will not displace the old actions. Even if purged, the new action will still match the existing Vidarr workflow runs.

## My workflow is having a bad time. How do I fix it?
If you have lots of actions that are going to run and fail:

- Go to the _Olives_ page, find your olive and click the _Pause Actions_ button. This will stop any from starting.
- Update your workflow/olive.
- Once Shesmu picks up your modified olive, it will appear in the _Olives_ page.
- On this page, you will also see a section title _Paused Dead Olives_. Select your old olive.
- Click _Purge Actions_.


## My workflow was having a bad time, but I forgot to pause it. How do I clean up the mess?
No worries, this isn't much harder:

- Go to the _Actions_ page.
- Click _Add Filter_ and choose _Source Olive_.
- Rummage through the long list for your olive. Depending on what you are willing to erase, you can choose the whole file or a specific olive with a specific version (check the _Olives_ page to get the current version hash).
- Click _Purge_.


## It's hard to get just the actions I want on the dashboard. Is there an easier way?
You can click almost any cell header or value and then use the buttons at the bottom to act on the subset of actions. Use the _Add Filter_ button to slice and dice the actions displayed.

## Can I see how some data is propagating through this olive?
Not quite, but if go to the _Olives_ page and select the olive, click _Edit in Simulator_ to have the source code for that file show up in the simulation dashboard. Add a _Where_ or _Dump_ clauses to filter the data of interest and simulate it to see what's going on.
