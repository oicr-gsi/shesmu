# Vidarr Plugin
[Vidarr](https://github.com/oicr-gsi/vidarr) is a bioinformatics analysis
provenance system.

To integrate Shesmu with a Vidarr server, create a configuration file ending in
`.vidarr` as follows:

    {
      "defaultMaxSubmissionDelay": null,
      "url": "http://vidarr:8000",
      "timeout": 120
    }

This will populate Shesmu with target + workflow combinations from the Vidarr
server. They will be updated every 10 minutes.

The `"defaultMaxSubmissionDelay"` determines if actions that might be stale
should be submitted to Vidarr. If null, workflow runs will always be submitted.
If a number, in seconds, is given, then the action must have been
(re-)generated by an olive in that window to be submitted to Vidarr. If that
window is exceeded, they will be run as dry-run.

`"timeout"` defines the HTTP connection timeout for fetching information from Vidarr, in minutes.

If you wish to configure a Vidarr instance so that caches can be built from its
data but workflow actions cannot be built and workflow runs cannot be submitted,
add the following field to the configuration file:

    "canSubmit": false

If this field is not provided, Shesmu will by default build all actions and 
caches for this Vidarr instance.

The Vidarr plugin provides an input format: `vidarr_analysis` which provides the analysis
provenance data. To use this input format add the fields to the configuration file as follows:

      "analysisTypes": ["FILE"],
      "versionTypes": []

The `"analysisTypes"` specifies the type of analysis desired. If no analysisTypes are specified the 
input format will be empty. For expected values reference
the [Vidarr AnalysisOutputType class](https://github.com/oicr-gsi/vidarr/blob/master/vidarr-pluginapi/src/main/java/ca/on/oicr/gsi/vidarr/api/AnalysisOutputType.java).

The `"versionTypes"` specifies
the [version keys](https://github.com/oicr-gsi/vidarr/blob/master/architecture.md#external-identifier-versions)
that should be returned; if empty,
all version keys are allowed.
